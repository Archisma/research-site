<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Aurora Systems Research Facility</title>

  <style>
    :root{
      --bg:#0b1020;
      --panel:#111a33;
      --border:rgba(255,255,255,.14);
      --text:#e9eeff;
      --muted:#aab6d6;
      --accent:#6aa6ff;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:linear-gradient(180deg,#0e1530,var(--bg));
    }
    .container{max-width:1100px;margin:0 auto;padding:22px}
    .hero{
      text-align:center;
      background:#111a33;
      border:1px solid var(--border);
      border-radius:22px;
      padding:26px;
    }
    .tabs{
      display:flex;
      gap:10px;
      justify-content:center;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .tab{
      padding:10px 16px;
      border-radius:999px;
      border:1px solid var(--border);
      cursor:pointer;
      font-weight:700;
      background:#0b1020;
    }
    .tab.active{
      background:linear-gradient(180deg,#7bb1ff,#5a90ff);
      color:#08142f;
    }
    .card{
      background:#111a33;
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px;
      margin-top:16px;
    }
    .panel{display:none}
    .panel.active{display:block}
    label{display:block;margin-top:10px;color:var(--muted)}
    input,select,textarea{
      width:100%;
      padding:12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#0b1020;
      color:var(--text);
    }
    textarea{min-height:200px;font-family:monospace}
    .buttons{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}
    button{
      padding:12px 18px;
      border-radius:14px;
      border:none;
      font-weight:800;
      cursor:pointer;
      background:linear-gradient(180deg,#7bb1ff,#5a90ff);
    }
    .danger{background:linear-gradient(180deg,#ff9a9a,#ff6a6a)}
    .status{margin-top:10px;font-size:12px;color:var(--muted)}
    .footer{
      margin-top:20px;
      padding-top:12px;
      border-top:1px solid var(--border);
      text-align:center;
      font-size:13px;
      color:var(--muted);
    }
  </style>
</head>

<body>
<div class="container">

  <div class="hero">
    <h1>Aurora Systems Research Facility</h1>
    <p>Unified Intelligence Hub: Research • Lineage • Production Issue Resolution</p>

    <div class="tabs">
      <div class="tab active" onclick="switchTab('research')">Research</div>
      <div class="tab" onclick="switchTab('lineage')">Lineage Intelligence</div>
      <div class="tab" onclick="switchTab('prod')">Production Issue Intelligence</div>
    </div>
  </div>

  <div class="card">

    <!-- Research -->
    <div class="panel active" id="research">
      <label>Research Topic</label>
      <input id="topic"/>

      <label>Mode</label>
      <select id="mode">
        <option value="public">Public</option>
        <option value="confidential">Confidential</option>
      </select>

      <div class="buttons">
        <button onclick="runResearch()">Run Research</button>
      </div>

      <textarea id="out" readonly></textarea>
      <div class="status" id="status">Status: Idle</div>
    </div>

    <!-- Lineage -->
    <div class="panel" id="lineage">
      <label>Field / Table / Metric</label>
      <input id="lineageQuery"/>

      <div class="buttons">
        <button onclick="runLineage()">Run Lineage</button>
      </div>

      <textarea id="lineageOut" readonly></textarea>
    </div>

    <!-- Production -->
    <div class="panel" id="prod">

      <div id="prodGate">
        <label>Username</label>
        <input id="prodUser"/>
        <label>Password</label>
        <input id="prodPass" type="password"/>

        <div class="buttons">
          <button class="danger" onclick="loginProd()">Login</button>
        </div>

        <div class="status" id="prodGateStatus">Status: Locked</div>
      </div>

      <div id="prodMain" style="display:none">
        <label>Error / Stack Trace</label>
        <textarea id="prodInput"></textarea>

        <div class="buttons">
          <button onclick="runProdIssue()">Analyze Issue</button>
        </div>

        <textarea id="prodOut" readonly></textarea>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <strong>Author:</strong> Archisma Ghosal &nbsp;|&nbsp;
      <strong>Contact:</strong> +1&nbsp;302&nbsp;363&nbsp;3094
      <br/>
      Aurora Systems is a fictional organization used solely for demonstration purposes.
    </div>

  </div>
</div>

<script>
  // Backend
  const API_BASE = "https://aurora-research-backend.onrender.com";
  const PUBLIC_URL = API_BASE + "/public_search";
  const SEARCH_URL = API_BASE + "/search";
  const LINEAGE_URL = API_BASE + "/lineage";
  const PROD_ISSUE_URL = API_BASE + "/prod_issue";

  // Demo credentials (NOT shown in UI)
  const DEMO_PROD_USER = "userdummy001";
  const DEMO_PROD_PASS = "Tuser@2026";

  function switchTab(id){
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    event.target.classList.add('active');
  }

  async function runResearch(){
    const topic = topic.value;
    const mode = document.getElementById("mode").value;
    const url = mode==="public" ? PUBLIC_URL : SEARCH_URL;
    const body = mode==="public" ? {topic} : {query:topic};
    status.textContent="Running...";
    const r = await fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});
    const d = await r.json();
    out.value = d.answer || JSON.stringify(d,null,2);
    status.textContent="Done";
  }

  async function runLineage(){
    const r = await fetch(LINEAGE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:lineageQuery.value})});
    const d = await r.json();
    lineageOut.value = d.answer || JSON.stringify(d,null,2);
  }

  function loginProd(){
    if(prodUser.value===DEMO_PROD_USER && prodPass.value===DEMO_PROD_PASS){
      prodGate.style.display="none";
      prodMain.style.display="block";
      prodGateStatus.textContent="Unlocked";
    } else {
      prodGateStatus.textContent="Invalid credentials";
    }
  }

  async function runProdIssue(){
    const r = await fetch(PROD_ISSUE_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({issue:prodInput.value})});
    const d = await r.json();
    prodOut.value = d.answer || JSON.stringify(d,null,2);
  }
</script>
</body>
</html>
